<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Hackathon Live Countdown</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;700;800&display=swap" rel="stylesheet">

<style>
body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: 'DM Sans', sans-serif;
    background: black;
    color: white;
    overflow: hidden;
}

.background-container {
    background-image:
        linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)),
        url('assets/hackhit bg.png');
    background-size: cover;
    background-position: center;

    height: 100vh;

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.start-btn {
    background: white;
    color: black;
    border: none;
    padding: 25px 60px;
    font-size: 2.5rem;
    font-weight: 800;
    border-radius: 15px;
    cursor: pointer;
    transition: .3s;
    text-transform: uppercase;
    box-shadow: 0 0 30px rgba(0,242,255,0.4);
}

.start-btn:hover {
    background: #00f2ff;
    transform: scale(1.05);
}

#competition-ui {
    display: none;
    flex-direction: column;
    align-items: center;
}

.label {
    font-size: 2rem;
    letter-spacing: 5px;
    color: #00f2ff;
    margin-bottom: 10px;
    text-transform: uppercase;
}

.countdown-text {
    font-size: 13rem;
    font-weight: 800;
    text-shadow: 0 0 50px rgba(0,242,255,0.5);
}

.submit-link {
    margin-top: 50px;
    font-size: 2rem;
    padding: 20px 50px;
    border-radius: 100px;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.2);
    backdrop-filter: blur(10px);
}

.submit-link b {
    color: #00f2ff;
}

#intro-overlay {
    display: none;
    font-size: 20rem;
    font-weight: 800;
    text-shadow: 0 0 100px rgba(255,255,255,0.6);
}

@media (max-width:768px){
    .countdown-text { font-size: 5rem; }
    #intro-overlay { font-size: 10rem; }
}
</style>
</head>

<body>

<div class="background-container">

<button id="trigger" class="start-btn">Start Competition</button>

<div id="intro-overlay"></div>

<div id="competition-ui">
    <div class="label" id="status-label">Time Remaining</div>
    <div class="countdown-text" id="timer">03h 20m 00s</div>

    <div class="submit-link">
        Submit project: <b>s.id/hackhit-submit</b>
    </div>
</div>

</div>

<script>
/* ---------------- AUDIO ---------------- */

// stable google CDN sounds
const beep = new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg");
const goSound = new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg");
const buzzer = new Audio("https://actions.google.com/sounds/v1/alarms/alarm_clock_ringing_maybe.ogg");

// preload audio (reduces delay)
[beep, goSound, buzzer].forEach(sound => sound.load());


/* ---------------- START BUTTON ---------------- */

document.getElementById("trigger").addEventListener("click", startIntro);


/* ---------------- INTRO COUNTDOWN ---------------- */

function startIntro(){

    document.getElementById("trigger").style.display = "none";

    const intro = document.getElementById("intro-overlay");
    intro.style.display = "block";

    let count = 3;

    const interval = setInterval(() => {

        intro.innerHTML = count;
        beep.currentTime = 0;
        beep.play();

        count--;

        if(count === 0){

            clearInterval(interval);

            setTimeout(() => {
                intro.innerHTML = "GO";
                goSound.play();

                setTimeout(() => {
                    intro.style.display = "none";
                    startCompetition();
                }, 800);

            }, 500);
        }

    },1000);
}


/* ---------------- MAIN COMPETITION TIMER ---------------- */

function startCompetition(){

    document.getElementById("competition-ui").style.display = "flex";

    const duration =
        (3 * 60 * 60 * 1000) +
        (20 * 60 * 1000);

    const endTime = Date.now() + duration;

    const timerInterval = setInterval(() => {

        const distance = endTime - Date.now();

        if(distance <= 0){

            clearInterval(timerInterval);

            buzzer.play();

            document.getElementById("timer").innerHTML = "TIME'S UP!";
            document.getElementById("timer").style.color = "#ff3e3e";
            document.getElementById("status-label").innerHTML = "Hacking Finished";

            return;
        }

        const hours = Math.floor(distance / (1000*60*60));
        const minutes = Math.floor((distance % (1000*60*60)) / (1000*60));
        const seconds = Math.floor((distance % (1000*60)) / 1000);

        document.getElementById("timer").innerHTML =
            String(hours).padStart(2,"0") + "h " +
            String(minutes).padStart(2,"0") + "m " +
            String(seconds).padStart(2,"0") + "s";

    },1000);
}

</script>
</body>
</html>
